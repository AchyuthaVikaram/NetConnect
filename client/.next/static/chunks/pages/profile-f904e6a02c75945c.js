(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{3235:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(9360)}])},9360:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var a=s(5893),i=s(5382),o=s(7294),r=s(3672);s(1163);var n=s(5007),l=s(4178),c=s(1989),d=s.n(c),p=s(3422),u=s(7026);function _(){var e,t,s;let c=(0,n.v9)(e=>e.posts),_=(0,n.v9)(e=>e.auth),m=(0,n.I0)(),[h,f]=(0,o.useState)([]),[x,y]=(0,o.useState)({}),[g,j]=(0,o.useState)(!1),[v,k]=(0,o.useState)({company:"",position:"",years:""}),N=e=>{k({...v,[e.target.name]:e.target.value})},[b,C]=(0,o.useState)(!1),[I,w]=(0,o.useState)({school:"",degree:"",filedOfStudy:""}),W=e=>{w({...I,[e.target.name]:e.target.value})},B=()=>{m((0,l.Bd)())};(0,o.useEffect)(()=>{null==_.user.userId?(m((0,u.is)()),y(_.user)):f(c.posts.filter(e=>e.userId.username===_.user.userId.username))},[c.posts]),(0,o.useEffect)(()=>{B()},[]);let E=async e=>{let t=new FormData;t.append("profilePicture",e),t.append("token",localStorage.getItem("token"));try{await p.n.post("/update_profile_picture",t,{headers:{"Content-Type":"multipart/form-data"}}),m((0,u.is)()),y(_.user)}catch(e){console.log(e)}};(0,o.useEffect)(()=>{y(_.user)},[_.user]);let S=async()=>{try{await p.n.post("/user_update",{token:localStorage.getItem("token"),name:x.userId.name}),await p.n.post("/update_profile_data",{token:localStorage.getItem("token"),bio:x.bio,currPost:x.currPost,pastWork:x.pastWork,education:x.education}),m((0,u.is)())}catch(e){console.log(e)}};return(0,a.jsx)(i.Z,{children:(0,a.jsxs)(r.Z,{children:[_.user.userId&&(0,a.jsxs)("div",{className:d().container,children:[(0,a.jsxs)("div",{className:d().backDropConatiner,children:[(0,a.jsx)("label",{htmlFor:"profilePictureUpload",className:d().backdrop_overlay,children:(0,a.jsx)("p",{children:"Edit"})}),(0,a.jsx)("input",{type:"file",hidden:!0,id:"profilePictureUpload",name:"profilePictureUpload",onChange:e=>{E(e.target.files[0])}}),(0,a.jsx)("img",{className:d().backDropImage,src:"default.jpg"===_.user.userId.profilePicture?"".concat(p._,"/").concat(_.user.userId.profilePicture):_.user.userId.profilePicture,alt:"usreImg"})]}),(0,a.jsx)("div",{className:d().profile_conatiner,children:(0,a.jsxs)("div",{className:d().profile_style,children:[(0,a.jsxs)("div",{style:{flex:"0.7"},children:[(0,a.jsxs)("div",{className:d().inputParent,children:[(0,a.jsx)("input",{className:d().nameEdit,type:"text",value:null===(e=x.userId)||void 0===e?void 0:e.name,onChange:e=>{y({...x,userId:{...x.userId,name:e.target.value}})}}),(0,a.jsx)("input",{className:d().userNameEdit,type:"text",value:"@"+(null===(t=x.userId)||void 0===t?void 0:t.username),onChange:e=>{y({...x,userId:{...x.userId,username:e.target.value}})}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("textarea",{name:"bio",onChange:e=>{y({...x,bio:e.target.value})},value:x.bio,rows:Math.max(3,Math.ceil((null===(s=x.bio)||void 0===s?void 0:s.length)/80)),style:{width:"100%"}}),(0,a.jsx)("p",{children:_.user.userId.bio})]}),(0,a.jsxs)("div",{className:d().work_history,children:[(0,a.jsx)("h4",{style:{marginBlock:"1rem"},children:"Work History"}),(0,a.jsx)("div",{className:d().work_history_list,children:_.user.pastWork.map((e,t)=>(0,a.jsxs)("div",{className:d().work_history_card,children:[(0,a.jsxs)("p",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"1.5rem",marginBlock:"1rem"},children:[e.company," -",e.position]}),(0,a.jsxs)("p",{children:[" ",(0,a.jsx)("span",{style:{color:"gray",paddingRight:"0.5rem"},children:"Working Years:"}),e.years]})]},t))}),(0,a.jsx)("button",{onClick:()=>{j(!0)},className:d().addWorkBtn,children:"Add Work"})]}),(0,a.jsxs)("div",{className:d().work_history,children:[(0,a.jsx)("h4",{style:{marginBlock:"1rem"},children:"Education"}),(0,a.jsx)("div",{className:d().work_history_list,children:_.user.education.map((e,t)=>(0,a.jsxs)("div",{className:d().work_history_card,children:[(0,a.jsxs)("p",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"1.5rem",marginBlock:"1rem"},children:[(0,a.jsx)("p",{children:e.school}),(0,a.jsxs)("p",{children:["-",e.degree]})]}),(0,a.jsxs)("p",{children:[" ",(0,a.jsx)("span",{style:{color:"gray",paddingRight:"0.5rem"},children:"Field Of Study:"}),e.filedOfStudy]})]},t))}),(0,a.jsx)("button",{onClick:()=>{C(!0)},className:d().addWorkBtn,children:"Add Education"})]}),x!==_.user&&(0,a.jsxs)("button",{onClick:S,className:d().saveChanges,children:[" ","update"]})]}),(0,a.jsxs)("div",{style:{flex:"0.3",width:"100%"},children:[(0,a.jsx)("h3",{style:{marginBlock:"1rem"},children:"Recent Activity"}),h.map((e,t)=>(0,a.jsx)("div",{className:d().postCard,children:(0,a.jsxs)("div",{className:d().card,children:[(0,a.jsx)("div",{className:d().card_profile,children:""!==e.media?(0,a.jsx)("img",{src:"".concat(e.media),alt:"post media"}):(0,a.jsx)("p",{children:"No Media"})}),(0,a.jsxs)("p",{children:[e.body.length>20?e.body.substring(0,20)+"...":e.body," "]})]})},t))]})]})})]}),g&&(0,a.jsx)("div",{onClick:()=>{j(!1)},className:d().commentContainer,children:(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:d().commentBox,children:[(0,a.jsx)("div",{className:d().input,children:(0,a.jsx)("input",{type:"text",placeholder:"Company",name:"company",id:"company",className:d().input_control,value:v.company,onChange:N})}),(0,a.jsx)("div",{className:d().input,children:(0,a.jsx)("input",{type:"text",placeholder:"Position",name:"position",id:"position",className:d().input_control,value:v.position,onChange:N})}),(0,a.jsx)("div",{className:d().input,children:(0,a.jsx)("input",{type:"text",placeholder:"Years",name:"years",id:"years",className:d().input_control,value:v.years,onChange:N})}),(0,a.jsx)("button",{onClick:()=>{y({...x,pastWork:[...x.pastWork,v]}),company,j(!1)},className:d().submit_button,children:"Add Work"})]})}),b&&(0,a.jsx)("div",{onClick:()=>{C(!1)},className:d().commentContainer,children:(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:d().commentBox,children:[(0,a.jsx)("div",{className:d().input,children:(0,a.jsx)("input",{type:"text",placeholder:"Name of College/School",name:"school",id:"school",className:d().input_control,value:I.school,onChange:W})}),(0,a.jsx)("div",{className:d().input,children:(0,a.jsx)("input",{type:"text",placeholder:"Name of Degree",name:"degree",id:"degree",className:d().input_control,value:I.degree,onChange:W})}),(0,a.jsx)("div",{className:d().input,children:(0,a.jsx)("input",{type:"text",placeholder:"Field of Study",name:"filedOfStudy",id:"filedOfStudy",className:d().input_control,value:I.filedOfStudy,onChange:W})}),(0,a.jsx)("button",{onClick:()=>{y({...x,education:[...x.education,I]}),C(!1)},className:d().submit_button,children:"Add Education"})]})})]})})}},1989:function(e){e.exports={container:"profile_container__oOWE6",backDropConatiner:"profile_backDropConatiner__13OBc",backDropImage:"profile_backDropImage__qZiOc",profile_conatiner:"profile_profile_conatiner__VNIMU",backdrop_overlay:"profile_backdrop_overlay__FqW15",card:"profile_card__cvuSz",card_profile:"profile_card_profile__EmIQt",connectButton:"profile_connectButton__WK0Lm",connectedButton:"profile_connectedButton__C6BMm",work_history:"profile_work_history__uAZQU",work_history_list:"profile_work_history_list__WhIx7",work_history_card:"profile_work_history_card__6ot3W",inputParent:"profile_inputParent__AyF4n",nameEdit:"profile_nameEdit__JI1j_",userNameEdit:"profile_userNameEdit___ayYJ",saveChanges:"profile_saveChanges__OQshS",addWorkBtn:"profile_addWorkBtn__YOF98",commentContainer:"profile_commentContainer__txCfH",commentBox:"profile_commentBox__5yDbu",input:"profile_input__gbinZ",input_control:"profile_input_control__P08nl",submit_button:"profile_submit_button__fxMv1",profile_style:"profile_profile_style___WNOC"}}},function(e){e.O(0,[107,888,774,179],function(){return e(e.s=3235)}),_N_E=e.O()}]);